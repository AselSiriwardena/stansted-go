<!DOCTYPE html>
<html lang="en">
<script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-firestore.js"></script>


<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Product Details</title>

    <!-- jQuery mobile files -->
    <link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css"/>
    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>


    <!-- Font awesome file -->
    <script src="https://kit.fontawesome.com/f083cf2118.js" crossorigin="anonymous"></script>

    <!-- Bootstrap CSS file -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <!-- Custom JS Files -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

    <!-- Custom main CSS file -->
    <link rel="stylesheet" href="index.css">
    <!--Normal API key -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <script
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC1qVGFzRPQQ1Ii5v78fJ5q0OsIUaBobUM&callback=initAutocomplete&libraries=places&v=weekly"
            defer
    ></script>
    <!--    With Marker-->
    <script
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC1qVGFzRPQQ1Ii5v78fJ5q0OsIUaBobUM&callback=initMap&libraries=places&v=weekly"
            defer
    ></script>
    <link rel="stylesheet" type="text/css" href="assets/css/map_style.css" />
    <link rel="stylesheet" type="text/css" href="assets/css/rating_style.css" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" type="text/css" href="assets/css/slider_style.css" />
    <link rel="stylesheet" type="text/css" href="assets/css/responsiveslides.css" />
    <script src="scripts/map.js"></script>
    <script src="scripts/jquery-3.2.1.min.js"></script>
    <script src="scripts/responsiveslides.min.js"></script>
    <script>
        $(function () {
            $("#slider").responsiveSlides({
                auto: false,
                pager: false,
                nav: true,
                speed: 500,
                namespace: "slider-callback",
                maxwidth: "550px"
            });

        });
    </script>
</head>

<body class="post-login">
<div data-role="page" class="productDetails">
    <div data-role="header" id="header" class="px-4 pt-5 pb-4">
        <div class="ui-grid-a header-title-icons d-flex align-items-center">
            <div class="ui-block-a w50 d-flex align-items-center">
                <a class="ui-btn p-0 m-0" data-transition="slide" data-rel="back" rel="external">
                    <img alt="back button" height="auto" src="assets/img/back.svg" width="30">
                </a>
            </div>
            <div class="ui-block-b icons w50">
                <i class=""></i>
                <i class="fas fa-share-alt"></i>
                <i class="fa fa-heart-o"></i>
            </div>
        </div>

        <div class="header-content text-center">
<!--            <div class="productImg">-->
<!--                <img class="img-fluid text-center pt-4" src="assets/img/product.png" id="image">-->
<!--            </div>-->
<!--            <div class="embed-responsive embed-responsive-16by9 hoverable">-->
<!--                <video class="embed-responsive-item" controls>-->
<!--                    <source src="https://firebasestorage.googleapis.com/v0/b/ui-ux-b3439.appspot.com/o/Videos%2Fvideoplayback.mp4?alt=media&token=8b7813d9-1150-470e-9f3c-66fb669dad47" type="video/mp4">-->
<!--                </video>-->
<!--            </div>-->
<!--            <div id="wrapper">-->

            <div class="px-4">
                <div class="font-size-xl truncate mb-2 text-justify" id="productTitle"> Cambridge</div>

                <div class="ui-grid-a d-flex align-items-center mt-1 ratingSection">
                    <div class="ui-block-a w40 font-size-l">
                        <i class="fa fa-star secondary-color-yellow-text"></i>
                        <i class="fa fa-star secondary-color-yellow-text"></i>
                        <i class="fa fa-star secondary-color-yellow-text"></i>
                        <i class="fa fa-star secondary-color-yellow-text"></i>
                        <i class="fa fa-star-o secondary-color-yellow-text"></i>
                    </div>
                    <div class="ui-block-b w60 px-2">
                        <a class="font-weight-bold m-0 primary-color-blue-text v-align-middle pathurl" accesskey="reviews">58
                            Reviews</a>
                    </div>
                </div>

                <div class="ui-grid-a mt-3 d-flex align-items-baseline priceSection">
                    <div class="ui-block-b font-weight-heavy font-size-xxl">
                        <div class="red">
                            <h4 class="primary-color-red-text text-justify"><b>Euro 10.99</b></h4>
                        </div>
                    </div>
                </div>
                <div id="ui-grid-a">
                    <div class="responsive-slider">
                        <ul class="rslides" id="slider">
                            <li>
                                <video width="100%" controls><source src="https://firebasestorage.googleapis.com/v0/b/ui-ux-b3439.appspot.com/o/Videos%2Fvideoplayback.mp4?alt=media&token=8b7813d9-1150-470e-9f3c-66fb669dad47" type="video/mp4"></video>
<!--                                <p class="caption">Sweets and Cherries</p>-->
                            </li>
                            <li>
                                <img src="assets/images/cream-shake.jpg" alt="">
                                <p class="caption">Sweets and Cherries</p>
                            </li>
                            <li>
                                <img src="assets/images/fruity-orange-ice-cream.jpg" alt="">
                                <p class="caption">Fruity Orange Ice Cream</p>
                            </li>
                            <li>
                                <img src="assets/images/cream-shake.jpg" alt="">
                                <p class="caption">Ice Cream with Fruit Salad</p>
                            </li>
                        </ul>
                    </div>
                </div>
                <hr class="rounded">

                <div class="text-justify line-height-small">
                    <p id="productDetails">
                        Brewed from the heart of Kashmir, Stok presents the
                        best cold brew coffee of the 21st Century. This new line
                        of cold brews gives twice the motivation and energy
                        while keeping the nostalgic taste everybody loves...
                    </p>
                </div>

                <div class="ui-grid-a px-4 w-landscape-50">
                    <div class="w-landscape-50">
                        <a accesskey="signIn.html" class="ui-btn btn primary-btn mb-3 pathUrl">PLAY</a>
                        <a accesskey="createAccount.html" class="ui-btn btn secondary-btn pathUrl">BUY NOW</a>
                    </div>
                </div>
                <hr class="rounded">
                <div class="card py-0 px-0">
                    <div id="map"></div>
                </div>
                <hr class="rounded">
                <div class="ui-grid-a main-head ">
                    <div class="ui-block-a">
                        <h4 class="primary-color-black-text text-justify font-weight-bold">Reviews</h4>
                    </div>
                </div>
                <div class="rating">
                    <div class="rating__number"><span id="rating_value">5.0</span></div>
                    <div class="rating__stars">
                        <div class="rating__stars-line">
                            <i class="fas fa-star rating__star"></i>
                            <i class="fas fa-star rating__star"></i>
                            <i class="fas fa-star rating__star"></i>
                            <i class="fas fa-star rating__star"></i>
                            <i class="fas fa-star rating__star"></i>
                        </div>
                        <div class="rating__stars-line">
                            <i class="fas fa-star rating__star"></i>
                            <i class="fas fa-star rating__star"></i>
                            <i class="fas fa-star rating__star"></i>
                            <i class="fas fa-star rating__star"></i>

                        </div>
                        <div class="rating__stars-line">
                            <i class="fas fa-star rating__star"></i>
                            <i class="fas fa-star rating__star"></i>
                            <i class="fas fa-star rating__star"></i>

                        </div>
                        <div class="rating__stars-line">
                            <i class="fas fa-star rating__star"></i>
                            <i class="fas fa-star rating__star"></i>

                        </div>
                        <div class="rating__stars-line">
                            <i class="fas fa-star rating__star"></i>

                        </div>
                    </div>
                    <div id="ratingBars" class="rating__bars">
                        <div id ="bar1" class="rating__bar rating__bar--1">

                        </div>
                        <div id ="bar2" class="rating__bar rating__bar--2"></div>
                        <div id ="bar3" class="rating__bar rating__bar--3"></div>
                        <div id ="bar4" class="rating__bar rating__bar--4"></div>
                        <div id ="bar5" class="rating__bar rating__bar--5"></div>
                    </div>
                </div>
                <hr class="rounded w95">
                <div class="card">
                    <div class="ui-grid-a">
                        <div class="ui-block-b w100 pl-2">
                            <div class="ui-grid-a">
                                <div class="ui-block-a w40">
                                    <h4 style="line-height: 1.5;" class="black text-justify font font-weight-bold">Jane Doe</h4>
                                </div>
                                <div style="color: #E2C224;" class="ui-block-b w60 text-right">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star-half-alt"></i>
                                </div>
                            </div>
                            <div class="review-content pt-2">
                                <p style="word-wrap: break-word;" class="primary-color-black text f16 text-justify">
                                    Great product ! This is
                                    the
                                    best
                                    coffee I've tasted in a while. Definitely recommended if you're a
                                    coffee
                                    lover.</p>
                            </div>
                            <div class="ui-grid-a">
                                <div class="ui-block-a">
                                    <h6 class="primary-color-grey-text f16 fw-bold text-justify">2 Days ago</h6>
                                </div>
                                <div class="ui-block-b f16 text-right">
                                    <i class="far fa-heart"></i> 57
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="w100 pl-2">
                    <!--                <div class="ui-grid-a px-3 w-landscape-50">-->
                    <div class="w-landscape-50">
                        <a href="reviews.html" rel="external" class="ui-btn btn secondary-btn mb-2 pathurl" accesskey="proceed">Show ALL Review</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div role="main" class="mt-4">
        <div class="mt-4 detailsBuy">

        </div>

    </div>
    <div data-role="footer" data-position="fixed" id="footer" data-tap-toggle="false" transition="fade" class="py-2">
        <div data-role="navbar" data-grid="d" class="h100">
            <ul>
                <li>
                    <a class="pathUrl" accesskey="home.html">
                        <i class="fa fa-home"></i>
                        <div>Home</div>
                    </a>
                </li>
                <li>
                    <a class="pathUrl" accesskey="deals.html">
                        <i class="fa fa-tag font"></i>
                        <div>Deals</div>
                    </a>
                </li>
                <li>
                    <a class="pathUrl" accesskey="store.html">
                        <i class="fa fa-store-alt"></i>
                        <div>Store</div>
                    </a>
                </li>
                <li>
                    <a class="pathUrl" accesskey="cart.html">
                        <i class="fa fa-shopping-cart"></i>
                        <div>Cart</div>
                    </a>
                </li>
                <li>
                    <a class="pathUrl" accesskey="profile.html">
                        <i class="fa fa-user"></i>
                        <div>Profile</div>
                    </a>
                </li>
            </ul>
        </div>
    </div>
</div>
<script>
    $(document).ready(function () {
        $(document).on("click", ".dealsClick", function () {
            sessionStorage.setItem("currentDeal", this.accessKey);
            sessionStorage.setItem("ratingFilter", '0');
            sessionStorage.setItem("priceFilter", '{"startValue":"0","EndValue":"145"}');
            sessionStorage.setItem("sort", 'default');
            document.location.href = 'promotion_details.html';
        });
        quantity = 1;
        var prodId;
        $.post("backend/singleProduct.php", {currentProduct: sessionStorage.getItem("currentProduct")}, function (data, status) {
            data = JSON.parse(data);
            $.each(data, function (i, v) {
                prodId = v.id;
                $('#productTitle').text(v.name);
                $('#productDetails').text(v.details);
                $('#price').text(' ' + v.price);
                $("#image").attr("src", v.image);
            });
        });
        $(".count").text("1");


        $(".plusCount").bind("click", function (event, ui) {
            quantity += 1;
            $(".count").text(quantity.toString());
        });

        $(".minusCount").bind("click", function (event, ui) {
            quantity -= 1;
            if (parseInt(quantity) > 0) {
                $(".count").text(quantity.toString());
            } else {
                quantity = 0;
                $(".count").text(quantity.toString());
            }
        });
        var alreadyCart = false;
        var index;
        $(".pathurl").click(function () {
            var currentCart = JSON.parse(sessionStorage.getItem('cart'));
            $.each(currentCart['items'], function (i, item) {
                if (item['id'] === prodId) {
                    alreadyCart = true;
                    index = i;
                    return false;
                }
            });
            if (alreadyCart) {
                currentCart['total'] = (parseFloat(currentCart['total']) - (parseFloat(currentCart['items'][index]['amount']) * parseFloat(currentCart['items'][index]['price']))).toFixed(2);
                currentCart['items'][index]['amount'] = quantity;
                currentCart['total'] = (parseFloat(currentCart['total']) + (parseFloat(currentCart['items'][index]['amount']) * parseFloat(currentCart['items'][index]['price']))).toFixed(2);
                sessionStorage.setItem('cart', JSON.stringify(currentCart));
            }
            else {
                var thisItem = {};
                thisItem['id'] = prodId;
                thisItem['name'] = $('#productTitle').text();
                thisItem['price'] = $('#price').text();
                thisItem['amount'] = quantity;
                currentCart['total'] = (parseFloat(currentCart['total']) + (parseFloat(thisItem['amount']) * parseFloat(thisItem['price']))).toFixed(2);
                currentCart['items'].push(thisItem);
                sessionStorage.setItem('cart', JSON.stringify(currentCart));
            }

            if (this.accessKey === 'proceed') {
                document.location.href = "cart.html";
            } else if (this.accessKey === 'reviews') {
                document.location.href = "reviews.html";
            }
            else {

            }

        });
    });
</script>
<script src="scripts/rating_process.js"></script>
</body>

</html>
