<!DOCTYPE html>
<html lang="en">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Reviews</title>

    <!-- jQuery mobile files -->
    <link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css"/>
    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>


    <!-- Font awesome file -->
    <script src="https://kit.fontawesome.com/f083cf2118.js" crossorigin="anonymous"></script>

    <!-- Bootstrap CSS file -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <!-- Custom JS Files -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

    <!-- Custom main CSS file -->
    <link rel="stylesheet" href="index.css">

</head>

<body class="post-login">
<div data-role="page" class="reviews">
    <div data-role="header" id="header" class="px-4 pt-5 pb-4">
        <div class="ui-grid-a d-flex align-items-center header-title-back">
            <div class="ui-block-a d-flex align-items-center">
                <a class="ui-btn p-0 m-0 pathUrl" data-transition="slide" accesskey="product_details.html"
                   rel="external">
                    <img alt="back button" height="auto" src="assets/img/back.svg" width="30">
                </a>
                <h3 class="m-0 pl-3">Reviews</h3>
            </div>
            <div class="ui-block-b icons">
                <a class="primary-color-black-text" data-rel="popup" href="#overlay" data-position-to="origin"><i
                        class="fas fa-search"></i></a>
                <div class="ui-content" data-shadow="false" data-theme="none" data-overlay-theme="a" data-role="popup"
                     id="overlay">
                    <div class="deals-search-bar">
                        <ul data-role="listview" data-filter="true" data-filter-reveal="true"
                            data-filter-placeholder="Searching Promotions" data-inset="true">
                            <li><a class="dealsClick" accesskey="1">Winter Coffee Sale</a></li>
                            <li><a class="dealsClick" accesskey="2">Google Pixel Sale</a></li>
                            <li><a class="dealsClick" accesskey="3">Furniture Sale</a></li>
                            <li><a class="dealsClick" accesskey="4">Electronic Christmas Sale</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div role="main" class="px-4">
        <div class="my-4 text-center">
            <a accesskey="addreview.html" rel="external" class="ui-link pathUrl">Add a Review</a>
        </div>
        <ul class="nav nav-tabs nav-justified nav-primary">
            <li class="nav-item">
                <a href="#latest" class="nav-link active" data-toggle="tab">Latest</a>
            </li>
            <li class="nav-item">
                <a href="#highest" class="nav-link" data-toggle="tab">Highest</a>
            </li>
            <li class="nav-item">
                <a href="#lowest" class="nav-link" data-toggle="tab">Lowest</a>
            </li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane fade show active" id="latest">
                <div id="reviewList"></div>
            </div>
            <div class="tab-pane fade show active" id="highest">
                <div id="reviewList_highest"></div>
            </div>
            <div class="tab-pane fade show active" id="lowest">
                <div id="reviewList_lowest"></div>
            </div>
        </div>
    </div>
</div>
</body>

</html>
<script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-firestore.js"></script>
<script>
    var config = {
        apiKey: "AIzaSyDC0db7ssF55Q-yfiGUeCqB8wtHZ4_tyZw",
        authDomain: "ui-ux-b3439.firebaseapp.com",
        projectId: "ui-ux-b3439",
        storageBucket: "ui-ux-b3439.appspot.com",
        messagingSenderId: "628403705685",
        appId: "1:628403705685:web:bebfe39d9d923bbf74c1dc",
        measurementId: "G-CMKJ405F25"
    };
    // Initialize Firebase
    var app = firebase.initializeApp(config);
    // Initialize Cloud Firestore through Firebase
    const db = app.firestore();

    let i = 0;

    db.collection("Places").doc('place_id_01').collection('Ratings').get().then((snapshot) => {
        snapshot.forEach(function(x) {
            $("#reviewList").append(`
                            ${!Boolean(i % 2) ? `<div class="ui-block-a w100 w-landscape-50">` : `<div class="ui-block-b w100 w-landscape-50">`}
                            <div class="ui-block-a pl-3">
                                <div class="card">
                                    <div class="ui-grid-a">
                                        <div class="ui-block-b w100 pl-2">
                                            <div class="ui-grid-a">
                                                <div class="ui-block-a w40">
                                                    <h4 style="line-height: 1.5;" class="black">${x.data().name?x.data().name:"Jane Doe"}</h4>
                                                </div>
                                                <div style="color: #E2C224;" class="ui-block-b w60 text-right">
                                                        ${x.data().rating === '4' ? `
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star-o secondary-color-yellow-text"></i>`
                : x.data().rating === '5' ?`<i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>`
                    : x.data().rating === '3' ? `<i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star-o secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star-o secondary-color-yellow-text"></i>`
                        : x.data().rating === '2' ? `<i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star-o secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star-o secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star-o secondary-color-yellow-text"></i>`
                            : x.data().rating === '1' ? `<i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star-o secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star-o secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star-o secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star-o secondary-color-yellow-text"></i>`
                                : `<i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>
                                                    `}

                                                </div>
                                            </div>
                                            <div class="review-content pt-2">
                                                <p style="word-wrap: break-word;" class="primary-color-black text f16">
                                                    ${x.data().description}</p>
                                            </div>
                                            <div class="ui-grid-a">
                                                <div class="ui-block-a">
                                                    <h6 class="primary-color-grey-text f16 fw-bold">${x.data().time}</h6>
                                                </div>
                                                <div class="ui-block-b f16 text-right">
                                                    <i class="far fa-heart"></i> 0
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                `);
            if(parseInt(x.data().rating,10)>3){
                $("#reviewList_highest").append(`
                            ${!Boolean(i % 2) ? `<div class="ui-block-a w100 w-landscape-50">` : `<div class="ui-block-b w100 w-landscape-50">`}
                            <div class="ui-block-a pl-3">
                                <div class="card">
                                    <div class="ui-grid-a">
                                        <div class="ui-block-b w100 pl-2">
                                            <div class="ui-grid-a">
                                                <div class="ui-block-a w40">
                                                    <h4 style="line-height: 1.5;" class="black">${x.data().name?x.data().name:"Jane Doe"}</h4>
                                                </div>
                                                <div style="color: #E2C224;" class="ui-block-b w60 text-right">
                                                        ${x.data().rating === '4' ? `
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star-o secondary-color-yellow-text"></i>`
                    : x.data().rating === '5' ?`<i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>`
                        : x.data().rating === '3' ? `<i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star-o secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star-o secondary-color-yellow-text"></i>`
                            : x.data().rating === '2' ? `<i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star-o secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star-o secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star-o secondary-color-yellow-text"></i>`
                                : x.data().rating === '1' ? `<i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star-o secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star-o secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star-o secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star-o secondary-color-yellow-text"></i>`
                                    : `<i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>
                                                    `}

                                                </div>
                                            </div>
                                            <div class="review-content pt-2">
                                                <p style="word-wrap: break-word;" class="primary-color-black text f16">
                                                    ${x.data().description}</p>
                                            </div>
                                            <div class="ui-grid-a">
                                                <div class="ui-block-a">
                                                    <h6 class="primary-color-grey-text f16 fw-bold">${x.data().time}</h6>
                                                </div>
                                                <div class="ui-block-b f16 text-right">
                                                    <i class="far fa-heart"></i> 0
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                `);
            }else {
                $("#reviewList_lowest").append(`
                            ${!Boolean(i % 2) ? `<div class="ui-block-a w100 w-landscape-50">` : `<div class="ui-block-b w100 w-landscape-50">`}
                            <div class="ui-block-a pl-3">
                                <div class="card">
                                    <div class="ui-grid-a">
                                        <div class="ui-block-b w100 pl-2">
                                            <div class="ui-grid-a">
                                                <div class="ui-block-a w40">
                                                    <h4 style="line-height: 1.5;" class="black">${x.data().name?x.data().name:"Jane Doe"}</h4>
                                                </div>
                                                <div style="color: #E2C224;" class="ui-block-b w60 text-right">
                                                        ${x.data().rating === '4' ? `
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star-o secondary-color-yellow-text"></i>`
                    : x.data().rating === '5' ?`<i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>`
                        : x.data().rating === '3' ? `<i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star-o secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star-o secondary-color-yellow-text"></i>`
                            : x.data().rating === '2' ? `<i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star-o secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star-o secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star-o secondary-color-yellow-text"></i>`
                                : x.data().rating === '1' ? `<i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star-o secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star-o secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star-o secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star-o secondary-color-yellow-text"></i>`
                                    : `<i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>
                                                        <i class="fa fa-star secondary-color-yellow-text"></i>
                                                    `}

                                                </div>
                                            </div>
                                            <div class="review-content pt-2">
                                                <p style="word-wrap: break-word;" class="primary-color-black text f16">
                                                    ${x.data().description}</p>
                                            </div>
                                            <div class="ui-grid-a">
                                                <div class="ui-block-a">
                                                    <h6 class="primary-color-grey-text f16 fw-bold">${x.data().time}</h6>
                                                </div>
                                                <div class="ui-block-b f16 text-right">
                                                    <i class="far fa-heart"></i> 0
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                `);
            }
            i = i + 1;
        });
    });


</script>
